using NUnit.Framework;

namespace FlawlessChips.Tests;

public class FlawlessZ80Tests
{
    [Test]
    public void TestStartupStateMatchesVisualZ80()
    {
        var chip = new FlawlessZ80();

        // This state was retrieved from Visual Z80 by running the equivalent simulation,
        // and then calling the JavaScript stateString() function to get the state.
        Assert.AreEqual(
            "xgvlxllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll",
            chip.GetState());

        chip.Startup();

        // This state was retrieved from Visual Z80 by running the equivalent simulation,
        // and then calling the JavaScript stateString() function to get the state.
        Assert.AreEqual(
            "xgvlxllllllllllllllllhhhhhhhhhhhllllllllhhllllllllllllhhllllhhllhlhhhlhlllllhllhhllhhllllhhhlhlhlllhhhlllhlllhlhlhllllhllhlhlhhlhlllllllhlhlhhhllllhlhlllllhhhhlllhllhllllllllhlllllllhllllhlhlhhllhhhllhhhlllllhllhllllllhllhllhlhllllllhlhhlhhhhhhllhllllhhhllhhllhllhlhlhllllllllllllllllllllllllllllllllllllllllllllllllllllllllllhlhllllllllllllllllllllllllllllhhhhlllllllllhhlhhhhhhhhhhllhllhhhlhlllhhhhhlhhhhlhhhlhhhhhhhhhhhhhhhhhhhhhhhlhlhhhhhhhhhlhhhllllllhhlllhlllhlhllllhhlllhlhhlllhhhhlhhlllllhlhhhllhhhhhhhhhhhhlhlhhhllhlhlhhhhllhhllhhllhlhlllhhhlllllhlllhlhlllllhlllllllllhhhhhhlhllllllllllllllhhhhhlhhhllhlllllhlllhhhhhhlhlhlhhlhhllhlllhlhhlhlllhllllllllllllllllllllllllllllhhhhhllhhhllhhhhhhhhhhhlhhllhhlllhhhlhhlhhhhhlhhlhhlhllllhhllhhlhhhllhhhhhllhlhhhlhhllhllhhlhhlhhlllhhllhhlhhlhhhlhlhhhhhlhlhllhhhlhhlhllllhlllhhllllhlhlhhhllhhlhlhlhhhlhhhlllhhhllllllhllhhhhlhhhlhllhhhhlhhhlhlllhhhllhlhhlhlhlhllhhllhhhlhhhhhhhllhlhhhlhlhhllhhhlllhlhhhhhlhhhlhhhhlhlhhlhhhlhllhlhhllhhhhlhhhhhlllhhhllhlhhhlhhhhhlhhlllhllhhlhllllllllllllllhllhhlhlhhhlhhhlllhlllhhhhllhllllhllhhlhlhhllhhlllhhlllllhhhhhhhhllllhhlhhlhhllhllhllllhllhhhlhhhhhlhlllhhhllhlllllhllhllhlhllhhhhlhhlhhhlhlhhhlhlhllhhhllhlllllhhlhlhhllhhhlhllhlhhllhlhlhlhhhlhhlllhhhhllllhlhhhhllhhhhhhlllhllhhhllhlhlhlhhhhhhhhllhhhhhlhhlllllhlhlhlhllhlhlhhlhhhlllhhllhlhhlhlhhhlllllhllllhhhlhlhllhhllhlhhlllhhhlllhhllhhlllhlhllhlhhllhlhhlhlhlhlhhlllllhllhhllhhllhlllhhlhlhhlllhhhlhhhhhhlhllhhhhlhhlhhhhlllllllllllhhllhlllllhhllhlhlhllhllllhllhhlllllhlhlhllllhlhlhhhhhhhlhhhhhhhhhhlhhlhlllhllhlhhllhhhhhhhhhllhhhhlhhlllllhlhllllllllhlllhllhlhhlhllhlhllhhlhllllhlhlhlllhllhlllhlllllhhlhlhllhhllhllhlhlhllhlhllhhhlhlhlllhlhlllhhhhhlhhlhlhlhhhhhhhhlhhhhlllhhhhhhhlhllllllhlllhlhlhhlhlhhhlhhhhhhhhhhhlhllllhlhlllhhllhhlhllhhlllllhllhlhlhlhlhhhhhllhhhhhhlhhlhhlhllhlhllhhhhhhhhhhhhhhhlhlhhllllhhhlllllllllllllhlhhhhhllhhhhhhhhhhhhhhhhhlhlhlhhhllllllllllllllhlhhlhlhlllllhhhhhhhhhhhhhlhllhlhhlhlhlhhhhllllllllllllhlllhlllhhlhhhhhhhhhhhhhhhhhlhlhhlhhhllllllllllllllllhhlhhllllhhhhhhhhhhhhhhhlhhlhlhhlhhlllllllllllllhhhhlhhhhhhhhhhhhhhhhhhllhhhlhhlhhllllllllllllllllhllhhhhllllhhhhhhhhhhhhhhhlhhhlhhhlllllllllllllhlhhllhhhhhhhhhhhhhhhhhhlhllhllhlhlhhhhllllllllllllllllhlllllhhhhhhlllhllllllhhhhhhhhhhhhhlhhlhhhlhhhhhllllllllllllhllhlhhhhhhhhhhhhhhhhhhhhlhhhlhhhhllllllllllllllhllllhlllhlhlhlhhhlhllllllhhhhhhhhhhhhhhhhhlhhhlhhlhhllllllllllllllhlhllllhlhlhhhhhhhhhhhhhhhhhhhlhhhllhhhlhhllllllllllllllllhhlhlllhhhhhhhhhhhhhhhlhhhllhllhhlllllllllllllllllhlhlhlhhhlhlhllhhhhhhhhhhhhhhhhhhlhlhhhlhhhhllllllllllllllllllllhllhlhlhhllhllllhhhhhhhhhhhhhhhlhhhllhhhlllllllllllllhlhllhhhhhhhhhhhhhhhhhlllhlhhlhllllllllllllllllllhlhllhhhhhhllhhhhhllllllllhlhhhhlllllhlhhhhhhlllllllllhllllhhhhhllllllllllllhhhhllllllllllllllllllllllllllllllhlllllhllllhlllhlhllllllhlllhlhhllllhlllllhhlhhhlhllhlhlllhlllhllllllllllllhlllhhlhllhllhlhhlhlhhhllhllhhhllllhhhlllhlhhlhllhhlllllhlhhhlllhhllllllhlllhllhhlhlhlllhllhlllllhllllhlhhlllhllllhllllllllllhllllllllllllhhlllllllllhllhhllllllllhllhhlllhlhlllhhllhlllhhllhllhlhlllllllllllhhlllllhllllhlllhllllllhlllllllllllllllllhllllllhllllllllllhllhlllhhlhllllhllllhlhhllhllhlllhlllhlllhllllhllhhhhlhlhllhhhlhhhlhllhhlllllhlhhllllhllhhhlhlhhllhhlhhlhhlllllhlllhhlllhllllhllllllllllllllllllllllllllllhlhlhhhllllhhhhlhllhlhhlhlhlhhllhhhlhlhhhhlhllllhhlhlhlllllllllhlhlhllhhlllhlhhhllllllhhhlhlhhlhlllhlhhllhhhlhhllllhhhhhhhhllhlhhlhhhhhhhllllhhlhlhlhlhlhhlhhhhhhhhllhlhhlhhhllhhhllhllllllllhlhhhllllhhllhllhlhhhlhhhhhhhlllllhllllhhlllhhhhhllhhhlhlhhlllhlhhhhllllllhhhllhhhlhhhlllhlllhlhhhlhhhhhhhhlllllhllllhllhhhlhllhlhhhhhhhhhhhllll",
            chip.GetState());
    }
}